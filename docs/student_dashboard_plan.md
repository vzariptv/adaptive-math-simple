# Student Dashboard Plan

Дата: 2025-08-20 23:23
Ответственный: Виктория / Cascade

## Цели
- Привести интерфейс студента к единому стилю (Bootstrap, общая `shared/base.html`).
- Реализовать 2 раздела: «Задачи» и «Профиль и прогресс».
- Обеспечить корректную работу эндпоинтов, фильтров и форм.

## Текущая архитектура
- Блюпринт: `blueprints/student/routes.py` (`student_bp`, url_prefix: `/student`).
  - `GET /student/tasks` → endpoint: `student.tasks`
  - `GET|POST /student/profile` → endpoint: `student.profile`
- Формы: `blueprints/student/forms.py`
  - `UpdateProfileForm`
  - `ChangePasswordForm`
- Шаблоны:
  - `templates/student/dashboard.html` (навбар и общий контент-блок)
  - `templates/student/tasks.html` (фильтр по теме, таблица задач с 0/3, статус)
  - `templates/student/profile.html` (редактирование профиля, смена пароля, изучаемые темы)
- База: `templates/shared/base.html`

## Бэклог задач
- [x] Задачи: добавить пагинацию списка задач (20 задач на страницу)
- [x] Задачи: фильтр по статусу (решено/ожидает)
- [ ] Задачи: действие «Выбрать» — роут на экран просмотра/решения (интеграция с существующими `tasks.view_task`/`solve_task` или новый студентский флоу)
- [ ] Профиль: улучшить UX валидации e-mail (подсветка ошибок)
- [ ] Профиль: модальное окно/страница «Подробнее» со статистикой (прошлая и текущая неделя) — графики как у админа
- [ ] Профиль: отображать метрики (успешность, среднее время и т.д.) по теме
- [ ] Общие: авто-активация пункта меню по `request.endpoint` (сделано для 2 пунктов, проверить на всех экранах)
- [ ] Тесты (pytest): покрыть новые эндпоинты (авторизация студента, фильтрация задач, обновление профиля, смена пароля)

## Лог изменений
- 2025-08-20 23:25 — Добавлены фильтр по статусу (решено/ожидает) и пагинация (20 на страницу) на странице задач студента. Обновлены: `blueprints/student/routes.py`, `templates/student/tasks.html`.

## Выполнено
- [x] Создан блюпринт `student` и зарегистрирован в `app.py`
- [x] `student.tasks`: список задач по выбранной теме и уровню студента (если прогресса нет — уровень `low`)
- [x] Подсчет попыток и статуса задачи (N/3, иконки «решено»/«ожидает»)
- [x] `student.profile`: формы обновления профиля и смены пароля, список изучаемых тем
- [x] Шаблоны переведены на наследование от `shared/base.html` через `student/dashboard.html`

## Важные замечания
- Лимит задач по теме берется из `TopicLevelConfig.task_count_threshold`; если нет — дефолт 10.
- Статус «решено» определяется фактом наличия успешной попытки по задаче.
- Кнопка «Выбрать» в задачах пока без действия — потребуется согласовать целевой флоу.

## Решения/выборы дизайна
- Маршруты студента отделены от общих роутов задач для более явного разграничения ролей.
- Шаблоны студента наследуют единый `dashboard.html`, чтобы минимизировать дублирование.

## Ссылки на ключевые файлы
- `blueprints/student/routes.py`
- `blueprints/student/forms.py`
- `templates/student/dashboard.html`
- `templates/student/tasks.html`
- `templates/student/profile.html`
